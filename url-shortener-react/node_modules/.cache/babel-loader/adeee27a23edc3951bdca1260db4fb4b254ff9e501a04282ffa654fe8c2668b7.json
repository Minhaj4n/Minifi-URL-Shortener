{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MINHAJUL ISLAM\\\\Desktop\\\\Minhaj\\\\Bitly_Clone\\\\url-shortener-react\\\\frontend\\\\src\\\\pages\\\\Dashboard.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport axios from 'axios';\nimport { useAuth } from '../context/AuthContext';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Line } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\n\n// DTO Interfaces (consistent with backend)\n\n// --- Helper Function to Format Date for API ---\nconst formatDateForAPI = dateString => {\n  // Ensures the date is treated as local time and formatted correctly for backend\n  const date = new Date(dateString);\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}T00:00:00`;\n};\nconst formatEndDateForAPI = dateString => {\n  const date = new Date(dateString);\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}T23:59:59`;\n};\n\n// --- Chart Configuration ---\nconst chartOptions = {\n  responsive: true,\n  maintainAspectRatio: false,\n  plugins: {\n    legend: {\n      position: 'top'\n    },\n    title: {\n      display: true,\n      text: 'Clicks Over Time' // Title will be updated dynamically\n    },\n    tooltip: {\n      callbacks: {\n        label: function (context) {\n          return ` Clicks: ${context.raw}`;\n        }\n      }\n    }\n  },\n  scales: {\n    y: {\n      beginAtZero: true,\n      ticks: {\n        stepSize: 1,\n        precision: 0 // Ensure integer ticks\n      }\n    },\n    x: {\n      ticks: {\n        maxRotation: 45,\n        minRotation: 45\n      }\n    }\n  }\n};\n\n// --- Data Fetching Function for Analytics ---\n// Takes shortUrl code (string) or null\nconst fetchAnalytics = async (shortUrlCode, startDateStr, endDateStr) => {\n  const params = {\n    startDate: formatDateForAPI(startDateStr),\n    endDate: formatEndDateForAPI(endDateStr)\n  };\n  let apiUrl = '/api/urls/analytics/user'; // Default to overall user analytics\n  let logPrefix = '[Overall Analytics]';\n  if (shortUrlCode !== null) {\n    apiUrl = `/api/urls/analytics/${shortUrlCode}`; // Use shortUrlCode directly in the path\n    logPrefix = `[URL Analytics Code: ${shortUrlCode}]`;\n  }\n  console.log(`${logPrefix} Fetching from ${apiUrl} with params:`, params);\n  try {\n    const response = await axios.get(apiUrl, {\n      params\n    });\n    console.log(`${logPrefix} Response data:`, response.data);\n    const data = Array.isArray(response.data) ? response.data : [];\n\n    // Sort the data by date\n    const sortedData = data.sort((a, b) => new Date(a.clickDate).getTime() - new Date(b.clickDate).getTime());\n    console.log(`${logPrefix} Processed & sorted data:`, sortedData);\n    return sortedData;\n  } catch (error) {\n    console.error(`${logPrefix} Error fetching analytics:`, error);\n    if (axios.isAxiosError(error)) {\n      var _error$response;\n      console.error(`${logPrefix} Axios error details:`, ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n    }\n    // Return empty array to avoid breaking UI, but log the error\n    return [];\n  }\n};\n\n// --- Dashboard Component ---\nconst Dashboard = () => {\n  _s();\n  const {\n    user,\n    logout\n  } = useAuth();\n  const queryClient = useQueryClient();\n  const navigate = useNavigate();\n\n  // State for URL Shortening\n  const [originalUrlInput, setOriginalUrlInput] = useState('');\n  const [shortenError, setShortenError] = useState('');\n  const [lastShortened, setLastShortened] = useState(null);\n\n  // State for Analytics - selectedUrl now stores the shortUrl string\n  const [selectedUrl, setSelectedUrl] = useState(null);\n  const [startDate, setStartDate] = useState(new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]);\n  const [endDate, setEndDate] = useState(new Date().toISOString().split('T')[0]);\n\n  // State to track which URL was just copied\n  const [copiedUrl, setCopiedUrl] = useState(null);\n\n  // State to trigger animation\n  const [isMounted, setIsMounted] = useState(false);\n\n  // Trigger mount animation\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  // --- Data Fetching: User's URLs ---\n  const {\n    data: urls,\n    isLoading: urlsLoading\n  } = useQuery({\n    queryKey: ['urls', user === null || user === void 0 ? void 0 : user.username],\n    // Include username in key\n    queryFn: async () => {\n      const response = await axios.get('/api/urls/myurls');\n      // console.log('URLs response:', response.data); // Optional: uncomment for debugging\n      return response.data;\n    },\n    enabled: !!user // Only fetch if user is loaded\n  });\n\n  // --- Data Fetching: Analytics ---\n  const {\n    data: analytics,\n    isLoading: analyticsLoading,\n    error: analyticsError\n  } = useQuery({\n    // Key changes based on selectedUrl (shortUrl string), startDate, and endDate\n    queryKey: ['analytics', selectedUrl !== null && selectedUrl !== void 0 ? selectedUrl : 'user', startDate, endDate],\n    queryFn: () => fetchAnalytics(selectedUrl, startDate, endDate),\n    // Pass selectedUrl (shortUrl string or null)\n    enabled: !!user,\n    // Only fetch analytics if user is loaded\n    refetchOnWindowFocus: false // Optional: disable refetch on window focus if causing issues\n    // staleTime: 5 * 60 * 1000, // Optional: Set data as stale after 5 minutes\n  });\n\n  // --- Mutation: Shorten URL ---\n  const shortenMutation = useMutation({\n    mutationFn: async ({\n      originalUrl\n    }) => {\n      const response = await axios.post('/api/urls/shorten', {\n        originalUrl\n      });\n      return response.data;\n    },\n    onSuccess: data => {\n      console.log('Shortened URL data:', data);\n      setLastShortened(data); // Store last shortened URL info\n      setOriginalUrlInput(''); // Clear input\n      setShortenError('');\n      queryClient.invalidateQueries({\n        queryKey: ['urls', user === null || user === void 0 ? void 0 : user.username]\n      }); // Refetch URL list\n    },\n    onError: error => {\n      console.error('Error shortening URL:', error);\n      setShortenError(`Failed to shorten URL: ${error.message}`);\n      setLastShortened(null);\n    }\n  });\n  const handleShortenSubmit = e => {\n    e.preventDefault();\n    setShortenError('');\n    setLastShortened(null);\n    if (!originalUrlInput.trim()) {\n      setShortenError('Please enter a URL.');\n      return;\n    }\n    shortenMutation.mutate({\n      originalUrl: originalUrlInput\n    });\n  };\n\n  // --- Calculations & Formatting ---\n  const totalClicks = analytics ? analytics.reduce((sum, event) => sum + event.count, 0) : 0;\n\n  // Function to create the full short URL for linking\n  const getFullShortUrl = shortCode => {\n    const base = (axios.defaults.baseURL || '').replace(/\\/$/, '');\n    const code = shortCode.replace(/^\\//, '');\n    return `${base}/${code}`;\n  };\n\n  // Prepare chart data dynamically, filling in missing dates\n  const generateChartData = () => {\n    if (!analytics) return {\n      labels: [],\n      datasets: []\n    };\n    const labels = [];\n    const dataPoints = [];\n    // Map date string (YYYY-MM-DD) from backend data to count\n    const analyticsMap = new Map(analytics.map(event => [event.clickDate.split('T')[0], event.count]));\n    let currentDate = new Date(startDate + 'T00:00:00'); // Interpret start date in local time\n    const lastDate = new Date(endDate + 'T00:00:00'); // Interpret end date in local time\n\n    // Ensure loop works across month/year changes correctly\n    while (currentDate <= lastDate) {\n      // Create the key for the map lookup in YYYY-MM-DD format from local date parts\n      const year = currentDate.getFullYear();\n      const month = String(currentDate.getMonth() + 1).padStart(2, '0');\n      const day = String(currentDate.getDate()).padStart(2, '0');\n      const dateStringForMap = `${year}-${month}-${day}`;\n\n      // Use locale string for the display label on the chart\n      labels.push(currentDate.toLocaleDateString());\n      // Lookup count using the correctly formatted local date string\n      dataPoints.push(analyticsMap.get(dateStringForMap) || 0);\n\n      // Move to the next day (modifies currentDate in place)\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n    return {\n      labels,\n      datasets: [{\n        label: 'Clicks',\n        data: dataPoints,\n        borderColor: 'rgb(75, 192, 192)',\n        tension: 0.1,\n        fill: false\n      }]\n    };\n  };\n  const chartData = generateChartData();\n\n  // Update chart title dynamically\n  const dynamicChartOptions = {\n    ...chartOptions,\n    plugins: {\n      ...chartOptions.plugins,\n      title: {\n        ...chartOptions.plugins.title,\n        text: selectedUrl ? 'Clicks Over Time (Selected URL)' : 'Clicks Over Time (All URLs)'\n      }\n    }\n  };\n\n  // Function to copy text to clipboard\n  const handleCopy = shortCode => {\n    const fullUrl = getFullShortUrl(shortCode);\n    navigator.clipboard.writeText(fullUrl).then(() => {\n      setCopiedUrl(shortCode); // Set the copied URL code for feedback\n      setTimeout(() => setCopiedUrl(null), 2000); // Reset after 2 seconds\n    }).catch(err => {\n      console.error('Failed to copy URL: ', err);\n      // Optionally show an error message to the user\n    });\n  };\n\n  // --- Render Logic ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"bg-white shadow-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between h-16\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              className: \"text-2xl font-bold text-blue-600\",\n              children: \"Minifi\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 16\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: `text-gray-700 text-sm hidden md:block transition-opacity duration-700 ease-in ${isMounted && user ? 'opacity-100' : 'opacity-0' // Fade in when mounted and user exists\n              }`,\n              children: [\"Welcome, \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: user === null || user === void 0 ? void 0 : user.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 16\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => navigate('/'),\n              className: \"px-3 py-1.5 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-150 ease-in-out\",\n              children: \"Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 16\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: logout,\n              className: \"px-3 py-1.5 rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors\",\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 16\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 14\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8 p-6 bg-white rounded-lg shadow\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold mb-4\",\n          children: \"Shorten a New URL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleShortenSubmit,\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"originalUrl\",\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Enter URL to shorten:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"originalUrl\",\n              type: \"url\",\n              value: originalUrlInput,\n              onChange: e => setOriginalUrlInput(e.target.value),\n              placeholder: \"https://example.com/very/long/url/to/shorten\",\n              className: \"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              required: true,\n              disabled: shortenMutation.isPending\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: shortenMutation.isPending,\n            className: \"w-full sm:w-auto bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:bg-blue-300 transition-colors\",\n            children: shortenMutation.isPending ? 'Shortening...' : 'Shorten URL'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), shortenError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-3 text-red-600\",\n          children: shortenError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 13\n        }, this), lastShortened && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 p-3 bg-green-50 border border-green-200 rounded-md\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-green-800\",\n            children: \"Successfully shortened!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mt-1\",\n            children: [\"Original: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"break-all\",\n              children: lastShortened.originalUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 67\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: [\"Short URL:\", /*#__PURE__*/_jsxDEV(\"a\", {\n              href: getFullShortUrl(lastShortened.shortUrl),\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              className: \"text-blue-600 hover:underline ml-1 break-all\",\n              children: getFullShortUrl(lastShortened.shortUrl)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-3 gap-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-semibold mb-4\",\n            children: \"Your Shortened URLs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), urlsLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [...Array(3)].map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-24 bg-gray-200 rounded-lg animate-pulse\"\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 15\n          }, this) : !urls || urls.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"You haven't shortened any URLs yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: urls === null || urls === void 0 ? void 0 : urls.map(url => /*#__PURE__*/_jsxDEV(\"div\", {\n              // Keep using numerical id for React key\n              className: `p-4 border rounded-lg cursor-pointer transition-all duration-150 ease-in-out ${selectedUrl === url.shortUrl // Compare with shortUrl string for highlighting\n              ? 'border-blue-500 bg-blue-50 shadow-md' : 'border-gray-200 hover:border-gray-300 hover:shadow-sm'}`\n              // Set selectedUrl state to the shortUrl string or null\n              ,\n              onClick: () => setSelectedUrl(prev => prev === url.shortUrl ? null : url.shortUrl),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-start mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500 break-all pr-2\",\n                  children: url.originalUrl\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-600 font-medium whitespace-nowrap\",\n                  children: [url.clickCount, \" total clicks\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                  href: getFullShortUrl(url.shortUrl) // Use helper function\n                  ,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  onClick: e => e.stopPropagation() // Prevent card click when clicking link\n                  ,\n                  className: \"text-blue-600 hover:underline break-all text-lg font-medium mr-3\",\n                  children: getFullShortUrl(url.shortUrl)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2 flex-shrink-0 ml-auto\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => {\n                      e.stopPropagation(); // Prevent card click\n                      handleCopy(url.shortUrl);\n                    },\n                    title: \"Copy short URL\",\n                    className: `p-1.5 rounded-md transition-colors ${copiedUrl === url.shortUrl ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-500 hover:bg-gray-200 hover:text-gray-700'}`,\n                    children: copiedUrl === url.shortUrl ?\n                    /*#__PURE__*/\n                    // CheckIcon (Heroicons example)\n                    _jsxDEV(\"svg\", {\n                      xmlns: \"http://www.w3.org/2000/svg\",\n                      className: \"h-4 w-4\",\n                      fill: \"none\",\n                      viewBox: \"0 0 24 24\",\n                      stroke: \"currentColor\",\n                      strokeWidth: 2,\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        d: \"M5 13l4 4L19 7\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 440,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 439,\n                      columnNumber: 29\n                    }, this) :\n                    /*#__PURE__*/\n                    // ClipboardDocumentIcon (Heroicons example)\n                    _jsxDEV(\"svg\", {\n                      xmlns: \"http://www.w3.org/2000/svg\",\n                      className: \"h-4 w-4\",\n                      fill: \"none\",\n                      viewBox: \"0 0 24 24\",\n                      stroke: \"currentColor\",\n                      strokeWidth: 2,\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        d: \"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 445,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 444,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 424,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-gray-400 whitespace-nowrap\",\n                    children: [\"Created: \", new Date(url.createdDate).toLocaleDateString()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 449,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 423,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 21\n              }, this)]\n            }, url.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-semibold mb-4\",\n            children: selectedUrl ? 'URL Analytics' : 'Overall Analytics'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6 p-4 bg-white rounded-lg shadow-sm border\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"Select Date Range:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: startDate,\n                onChange: e => setStartDate(e.target.value),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500\",\n                max: endDate // Prevent start date being after end date\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: endDate,\n                onChange: e => setEndDate(e.target.value),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500\",\n                min: startDate // Prevent end date being before start date\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 13\n          }, this), analyticsLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-16 bg-gray-200 rounded-lg animate-pulse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-64 bg-gray-200 rounded-lg animate-pulse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-32 bg-gray-200 rounded-lg animate-pulse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 15\n          }, this) : analyticsError ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-red-600 p-4 border border-red-200 rounded-lg bg-red-50\",\n            children: [\"Error loading analytics: \", analyticsError instanceof Error ? analyticsError.message : 'Unknown error']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this) : !analytics || analytics.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-500 p-4 border rounded-lg bg-gray-50 text-center\",\n            children: [\"No click data available for the selected \", selectedUrl ? 'URL and' : '', \" date range.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 16\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 bg-white border rounded-lg shadow-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-medium text-gray-700 mb-1\",\n                children: \"Total Clicks\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-3xl font-bold text-blue-600\",\n                children: totalClicks\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-500 mt-1\",\n                children: [\"Between \", new Date(startDate + 'T00:00:00').toLocaleDateString(), \" and \", new Date(endDate + 'T00:00:00').toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 bg-white border rounded-lg shadow-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-medium text-gray-700 mb-2\",\n                children: selectedUrl ? 'Daily Clicks (Selected URL)' : 'Daily Clicks (All URLs)'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-64 relative\",\n                children: /*#__PURE__*/_jsxDEV(Line, {\n                  data: chartData,\n                  options: dynamicChartOptions\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 297,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"7N1KoXiS7TCO41pyHYWaL+qV18k=\", false, function () {\n  return [useAuth, useQueryClient, useNavigate, useQuery, useQuery, useMutation];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","useQuery","useMutation","useQueryClient","axios","useAuth","Link","useNavigate","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","jsxDEV","_jsxDEV","register","formatDateForAPI","dateString","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","formatEndDateForAPI","chartOptions","responsive","maintainAspectRatio","plugins","legend","position","title","display","text","tooltip","callbacks","label","context","raw","scales","y","beginAtZero","ticks","stepSize","precision","x","maxRotation","minRotation","fetchAnalytics","shortUrlCode","startDateStr","endDateStr","params","startDate","endDate","apiUrl","logPrefix","console","log","response","get","data","Array","isArray","sortedData","sort","a","b","clickDate","getTime","error","isAxiosError","_error$response","message","Dashboard","_s","user","logout","queryClient","navigate","originalUrlInput","setOriginalUrlInput","shortenError","setShortenError","lastShortened","setLastShortened","selectedUrl","setSelectedUrl","setStartDate","now","toISOString","split","setEndDate","copiedUrl","setCopiedUrl","isMounted","setIsMounted","urls","isLoading","urlsLoading","queryKey","username","queryFn","enabled","analytics","analyticsLoading","analyticsError","refetchOnWindowFocus","shortenMutation","mutationFn","originalUrl","post","onSuccess","invalidateQueries","onError","handleShortenSubmit","e","preventDefault","trim","mutate","totalClicks","reduce","sum","event","count","getFullShortUrl","shortCode","base","defaults","baseURL","replace","code","generateChartData","labels","datasets","dataPoints","analyticsMap","Map","map","currentDate","lastDate","dateStringForMap","push","toLocaleDateString","setDate","borderColor","tension","fill","chartData","dynamicChartOptions","handleCopy","fullUrl","navigator","clipboard","writeText","then","setTimeout","catch","err","className","children","to","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","htmlFor","id","type","value","onChange","target","placeholder","required","disabled","isPending","href","shortUrl","rel","_","i","length","url","prev","clickCount","stopPropagation","xmlns","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","createdDate","max","min","Error","options","_c","$RefreshReg$"],"sources":["C:/Users/MINHAJUL ISLAM/Desktop/Minhaj/Bitly_Clone/url-shortener-react/frontend/src/pages/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport axios from 'axios';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { Line } from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n} from 'chart.js';\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\n// DTO Interfaces (consistent with backend)\r\ninterface UrlMappingDTO {\r\n  id: number;\r\n  originalUrl: string;\r\n  shortUrl: string; // Expecting just the code, e.g., \"abcdef\"\r\n  clickCount: number;\r\n  createdDate: string;\r\n  username: string;\r\n}\r\n\r\ninterface ClickEventDTO {\r\n  clickDate: string;\r\n  count: number;\r\n}\r\n\r\n// --- Helper Function to Format Date for API ---\r\nconst formatDateForAPI = (dateString: string): string => {\r\n  // Ensures the date is treated as local time and formatted correctly for backend\r\n  const date = new Date(dateString);\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  return `${year}-${month}-${day}T00:00:00`;\r\n};\r\nconst formatEndDateForAPI = (dateString: string): string => {\r\n  const date = new Date(dateString);\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  return `${year}-${month}-${day}T23:59:59`;\r\n};\r\n\r\n// --- Chart Configuration ---\r\nconst chartOptions = {\r\n  responsive: true,\r\n  maintainAspectRatio: false,\r\n  plugins: {\r\n    legend: {\r\n      position: 'top' as const,\r\n    },\r\n    title: {\r\n      display: true,\r\n      text: 'Clicks Over Time' // Title will be updated dynamically\r\n    },\r\n    tooltip: {\r\n      callbacks: {\r\n        label: function(context: any) {\r\n          return ` Clicks: ${context.raw}`;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  scales: {\r\n    y: {\r\n      beginAtZero: true,\r\n      ticks: {\r\n        stepSize: 1,\r\n        precision: 0 // Ensure integer ticks\r\n      }\r\n    },\r\n    x: {\r\n      ticks: {\r\n        maxRotation: 45,\r\n        minRotation: 45\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n// --- Data Fetching Function for Analytics ---\r\n// Takes shortUrl code (string) or null\r\nconst fetchAnalytics = async (shortUrlCode: string | null, startDateStr: string, endDateStr: string): Promise<ClickEventDTO[]> => {\r\n  const params = {\r\n    startDate: formatDateForAPI(startDateStr),\r\n    endDate: formatEndDateForAPI(endDateStr)\r\n  };\r\n  let apiUrl = '/api/urls/analytics/user'; // Default to overall user analytics\r\n  let logPrefix = '[Overall Analytics]';\r\n\r\n  if (shortUrlCode !== null) {\r\n    apiUrl = `/api/urls/analytics/${shortUrlCode}`; // Use shortUrlCode directly in the path\r\n    logPrefix = `[URL Analytics Code: ${shortUrlCode}]`;\r\n  }\r\n\r\n  console.log(`${logPrefix} Fetching from ${apiUrl} with params:`, params);\r\n  \r\n  try {\r\n    const response = await axios.get<ClickEventDTO[]>(apiUrl, { params });\r\n    console.log(`${logPrefix} Response data:`, response.data);\r\n    \r\n    const data = Array.isArray(response.data) ? response.data : [];\r\n    \r\n    // Sort the data by date\r\n    const sortedData = data.sort((a, b) => \r\n      new Date(a.clickDate).getTime() - new Date(b.clickDate).getTime()\r\n    );\r\n    \r\n    console.log(`${logPrefix} Processed & sorted data:`, sortedData);\r\n    return sortedData;\r\n  } catch (error) {\r\n    console.error(`${logPrefix} Error fetching analytics:`, error);\r\n    if (axios.isAxiosError(error)) {\r\n      console.error(`${logPrefix} Axios error details:`, error.response?.data || error.message);\r\n    }\r\n    // Return empty array to avoid breaking UI, but log the error\r\n    return []; \r\n  }\r\n};\r\n\r\n// --- Dashboard Component ---\r\nconst Dashboard: React.FC = () => {\r\n  const { user, logout } = useAuth();\r\n  const queryClient = useQueryClient();\r\n  const navigate = useNavigate();\r\n\r\n  // State for URL Shortening\r\n  const [originalUrlInput, setOriginalUrlInput] = useState('');\r\n  const [shortenError, setShortenError] = useState('');\r\n  const [lastShortened, setLastShortened] = useState<UrlMappingDTO | null>(null);\r\n\r\n  // State for Analytics - selectedUrl now stores the shortUrl string\r\n  const [selectedUrl, setSelectedUrl] = useState<string | null>(null);\r\n  const [startDate, setStartDate] = useState<string>(new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]);\r\n  const [endDate, setEndDate] = useState<string>(new Date().toISOString().split('T')[0]);\r\n\r\n  // State to track which URL was just copied\r\n  const [copiedUrl, setCopiedUrl] = useState<string | null>(null);\r\n\r\n  // State to trigger animation\r\n  const [isMounted, setIsMounted] = useState(false);\r\n\r\n  // Trigger mount animation\r\n  useEffect(() => {\r\n    setIsMounted(true);\r\n  }, []);\r\n\r\n  // --- Data Fetching: User's URLs ---\r\n  const { data: urls, isLoading: urlsLoading } = useQuery<UrlMappingDTO[]>({\r\n    queryKey: ['urls', user?.username], // Include username in key\r\n    queryFn: async () => {\r\n      const response = await axios.get('/api/urls/myurls');\r\n      // console.log('URLs response:', response.data); // Optional: uncomment for debugging\r\n      return response.data;\r\n    },\r\n    enabled: !!user // Only fetch if user is loaded\r\n  });\r\n\r\n  // --- Data Fetching: Analytics ---\r\n  const { data: analytics, isLoading: analyticsLoading, error: analyticsError } = useQuery<ClickEventDTO[]>({\r\n    // Key changes based on selectedUrl (shortUrl string), startDate, and endDate\r\n    queryKey: ['analytics', selectedUrl ?? 'user', startDate, endDate], \r\n    queryFn: () => fetchAnalytics(selectedUrl, startDate, endDate), // Pass selectedUrl (shortUrl string or null)\r\n    enabled: !!user, // Only fetch analytics if user is loaded\r\n    refetchOnWindowFocus: false, // Optional: disable refetch on window focus if causing issues\r\n    // staleTime: 5 * 60 * 1000, // Optional: Set data as stale after 5 minutes\r\n  });\r\n\r\n  // --- Mutation: Shorten URL ---\r\n  const shortenMutation = useMutation<UrlMappingDTO, Error, { originalUrl: string }>({\r\n    mutationFn: async ({ originalUrl }) => {\r\n      const response = await axios.post<UrlMappingDTO>('/api/urls/shorten', { originalUrl });\r\n      return response.data;\r\n    },\r\n    onSuccess: (data) => {\r\n      console.log('Shortened URL data:', data);\r\n      setLastShortened(data); // Store last shortened URL info\r\n      setOriginalUrlInput(''); // Clear input\r\n      setShortenError('');\r\n      queryClient.invalidateQueries({ queryKey: ['urls', user?.username] }); // Refetch URL list\r\n    },\r\n    onError: (error) => {\r\n      console.error('Error shortening URL:', error);\r\n      setShortenError(`Failed to shorten URL: ${error.message}`);\r\n      setLastShortened(null);\r\n    },\r\n  });\r\n\r\n  const handleShortenSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setShortenError('');\r\n    setLastShortened(null);\r\n    if (!originalUrlInput.trim()) {\r\n      setShortenError('Please enter a URL.');\r\n      return;\r\n    }\r\n    shortenMutation.mutate({ originalUrl: originalUrlInput });\r\n  };\r\n\r\n  // --- Calculations & Formatting ---\r\n  const totalClicks = analytics ? analytics.reduce((sum, event) => sum + event.count, 0) : 0;\r\n  \r\n  // Function to create the full short URL for linking\r\n  const getFullShortUrl = (shortCode: string): string => {\r\n    const base = (axios.defaults.baseURL || '').replace(/\\/$/, '');\r\n    const code = shortCode.replace(/^\\//, '');\r\n    return `${base}/${code}`;\r\n  };\r\n  \r\n  // Prepare chart data dynamically, filling in missing dates\r\n  const generateChartData = () => {\r\n    if (!analytics) return { labels: [], datasets: [] };\r\n\r\n    const labels: string[] = [];\r\n    const dataPoints: number[] = [];\r\n    // Map date string (YYYY-MM-DD) from backend data to count\r\n    const analyticsMap = new Map(analytics.map(event => [event.clickDate.split('T')[0], event.count])); \r\n\r\n    let currentDate = new Date(startDate + 'T00:00:00'); // Interpret start date in local time\r\n    const lastDate = new Date(endDate + 'T00:00:00');   // Interpret end date in local time\r\n\r\n    // Ensure loop works across month/year changes correctly\r\n    while (currentDate <= lastDate) {\r\n      // Create the key for the map lookup in YYYY-MM-DD format from local date parts\r\n      const year = currentDate.getFullYear();\r\n      const month = String(currentDate.getMonth() + 1).padStart(2, '0');\r\n      const day = String(currentDate.getDate()).padStart(2, '0');\r\n      const dateStringForMap = `${year}-${month}-${day}`; \r\n\r\n      // Use locale string for the display label on the chart\r\n      labels.push(currentDate.toLocaleDateString()); \r\n      // Lookup count using the correctly formatted local date string\r\n      dataPoints.push(analyticsMap.get(dateStringForMap) || 0); \r\n      \r\n      // Move to the next day (modifies currentDate in place)\r\n      currentDate.setDate(currentDate.getDate() + 1);\r\n    }\r\n\r\n    return {\r\n      labels,\r\n      datasets: [\r\n        {\r\n          label: 'Clicks',\r\n          data: dataPoints,\r\n          borderColor: 'rgb(75, 192, 192)',\r\n          tension: 0.1,\r\n          fill: false\r\n        }\r\n      ]\r\n    };\r\n  };\r\n\r\n  const chartData = generateChartData();\r\n  \r\n  // Update chart title dynamically\r\n  const dynamicChartOptions = {\r\n    ...chartOptions,\r\n    plugins: {\r\n      ...chartOptions.plugins,\r\n      title: {\r\n        ...chartOptions.plugins.title,\r\n        text: selectedUrl ? 'Clicks Over Time (Selected URL)' : 'Clicks Over Time (All URLs)'\r\n      }\r\n    }\r\n  };\r\n\r\n  // Function to copy text to clipboard\r\n  const handleCopy = (shortCode: string) => {\r\n    const fullUrl = getFullShortUrl(shortCode);\r\n    navigator.clipboard.writeText(fullUrl).then(() => {\r\n      setCopiedUrl(shortCode); // Set the copied URL code for feedback\r\n      setTimeout(() => setCopiedUrl(null), 2000); // Reset after 2 seconds\r\n    }).catch(err => {\r\n      console.error('Failed to copy URL: ', err);\r\n      // Optionally show an error message to the user\r\n    });\r\n  };\r\n\r\n  // --- Render Logic ---\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Navigation */}\r\n      <nav className=\"bg-white shadow-sm\">\r\n         <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n           <div className=\"flex justify-between h-16\">\r\n             <div className=\"flex items-center\">\r\n               <Link to=\"/\" className=\"text-2xl font-bold text-blue-600\">\r\n                 Minifi\r\n               </Link>\r\n             </div>\r\n             <div className=\"flex items-center space-x-4\">\r\n               {/* Welcome Message with Fade-in */} \r\n               <span \r\n                 className={`text-gray-700 text-sm hidden md:block transition-opacity duration-700 ease-in ${ \r\n                   isMounted && user ? 'opacity-100' : 'opacity-0' // Fade in when mounted and user exists\r\n                 }`}\r\n                > \r\n                 Welcome, <span className=\"font-medium\">{user?.username}</span>\r\n               </span>\r\n               <button\r\n                 onClick={() => navigate('/')}\r\n                 className=\"px-3 py-1.5 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-150 ease-in-out\"\r\n               >\r\n                 Home\r\n               </button>\r\n               <button\r\n                 onClick={logout}\r\n                 className=\"px-3 py-1.5 rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors\"\r\n               >\r\n                 Logout\r\n               </button>\r\n             </div>\r\n           </div>\r\n         </div>\r\n       </nav>\r\n\r\n      <div className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\r\n        \r\n        {/* Shorten URL Form */}\r\n        <div className=\"mb-8 p-6 bg-white rounded-lg shadow\">\r\n          <h2 className=\"text-2xl font-semibold mb-4\">Shorten a New URL</h2>\r\n          <form onSubmit={handleShortenSubmit} className=\"space-y-4\">\r\n            <div>\r\n              <label htmlFor=\"originalUrl\" className=\"block text-sm font-medium text-gray-700 mb-1\">Enter URL to shorten:</label>\r\n              <input\r\n                id=\"originalUrl\"\r\n                type=\"url\"\r\n                value={originalUrlInput}\r\n                onChange={(e) => setOriginalUrlInput(e.target.value)}\r\n                placeholder=\"https://example.com/very/long/url/to/shorten\"\r\n                className=\"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                required\r\n                disabled={shortenMutation.isPending}\r\n              />\r\n            </div>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={shortenMutation.isPending}\r\n              className=\"w-full sm:w-auto bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:bg-blue-300 transition-colors\"\r\n            >\r\n              {shortenMutation.isPending ? 'Shortening...' : 'Shorten URL'}\r\n            </button>\r\n          </form>\r\n          {shortenError && (\r\n            <p className=\"mt-3 text-red-600\">{shortenError}</p>\r\n          )}\r\n          {lastShortened && (\r\n            <div className=\"mt-4 p-3 bg-green-50 border border-green-200 rounded-md\">\r\n              <p className=\"text-green-800\">Successfully shortened!</p>\r\n              <p className=\"text-sm text-gray-600 mt-1\">Original: <span className=\"break-all\">{lastShortened.originalUrl}</span></p>\r\n              <p className=\"text-sm text-gray-600\">Short URL: \r\n                <a \r\n                  href={getFullShortUrl(lastShortened.shortUrl)} \r\n                  target=\"_blank\" \r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"text-blue-600 hover:underline ml-1 break-all\"\r\n                >\r\n                  {getFullShortUrl(lastShortened.shortUrl)}\r\n                </a>\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Main Content Grid: URL List and Analytics */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          \r\n          {/* URL List */} \r\n          <div className=\"lg:col-span-2\">\r\n            <h2 className=\"text-2xl font-semibold mb-4\">Your Shortened URLs</h2>\r\n            {urlsLoading ? (\r\n              <div className=\"space-y-4\">\r\n                {[...Array(3)].map((_, i) => (\r\n                  <div key={i} className=\"h-24 bg-gray-200 rounded-lg animate-pulse\"></div>\r\n                ))}\r\n              </div>\r\n            ) : !urls || urls.length === 0 ? (\r\n              <p className=\"text-gray-500\">You haven't shortened any URLs yet.</p>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {urls?.map((url) => (\r\n                  <div\r\n                    key={url.id} // Keep using numerical id for React key\r\n                    className={`p-4 border rounded-lg cursor-pointer transition-all duration-150 ease-in-out ${\r\n                      selectedUrl === url.shortUrl // Compare with shortUrl string for highlighting\r\n                        ? 'border-blue-500 bg-blue-50 shadow-md' \r\n                        : 'border-gray-200 hover:border-gray-300 hover:shadow-sm'\r\n                    }`}\r\n                    // Set selectedUrl state to the shortUrl string or null\r\n                    onClick={() => setSelectedUrl(prev => prev === url.shortUrl ? null : url.shortUrl)} \r\n                  >\r\n                    <div className=\"flex justify-between items-start mb-1\">\r\n                      <p className=\"text-sm text-gray-500 break-all pr-2\">{url.originalUrl}</p>\r\n                      <span className=\"text-sm text-gray-600 font-medium whitespace-nowrap\">{url.clickCount} total clicks</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between items-center mt-1\">\r\n                      <a\r\n                        href={getFullShortUrl(url.shortUrl)} // Use helper function\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        onClick={(e) => e.stopPropagation()} // Prevent card click when clicking link\r\n                        className=\"text-blue-600 hover:underline break-all text-lg font-medium mr-3\"\r\n                      >\r\n                        {/* Display the full short URL */} \r\n                        {getFullShortUrl(url.shortUrl)} \r\n                      </a>\r\n                      <div className=\"flex items-center space-x-2 flex-shrink-0 ml-auto\">\r\n                        <button\r\n                          onClick={(e) => { \r\n                            e.stopPropagation(); // Prevent card click\r\n                            handleCopy(url.shortUrl); \r\n                          }}\r\n                          title=\"Copy short URL\"\r\n                          className={`p-1.5 rounded-md transition-colors ${ \r\n                            copiedUrl === url.shortUrl \r\n                              ? 'bg-green-100 text-green-700' \r\n                              : 'bg-gray-100 text-gray-500 hover:bg-gray-200 hover:text-gray-700'\r\n                          }`}\r\n                        >\r\n                          {/* Conditional Icon/Text */} \r\n                          {copiedUrl === url.shortUrl ? (\r\n                            // CheckIcon (Heroicons example)\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 13l4 4L19 7\" />\r\n                            </svg>\r\n                          ) : (\r\n                            // ClipboardDocumentIcon (Heroicons example)\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\r\n                            </svg>\r\n                          )}\r\n                        </button>\r\n                        <span className=\"text-xs text-gray-400 whitespace-nowrap\">\r\n                          Created: {new Date(url.createdDate).toLocaleDateString()}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Analytics Section */}\r\n          <div className=\"lg:col-span-1\">\r\n            <h2 className=\"text-2xl font-semibold mb-4\">\r\n              {selectedUrl ? 'URL Analytics' : 'Overall Analytics'} \r\n            </h2>\r\n            {/* Date Range Picker */}\r\n            <div className=\"mb-6 p-4 bg-white rounded-lg shadow-sm border\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Select Date Range:</label>\r\n              <div className=\"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2\">\r\n                <input\r\n                  type=\"date\"\r\n                  value={startDate}\r\n                  onChange={(e) => setStartDate(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                  max={endDate} // Prevent start date being after end date\r\n                />\r\n                <input\r\n                  type=\"date\"\r\n                  value={endDate}\r\n                  onChange={(e) => setEndDate(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                  min={startDate} // Prevent end date being before start date\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Analytics Display Area */}\r\n            {analyticsLoading ? (\r\n              <div className=\"space-y-4\">\r\n                 <div className=\"h-16 bg-gray-200 rounded-lg animate-pulse\"></div>\r\n                 <div className=\"h-64 bg-gray-200 rounded-lg animate-pulse\"></div>\r\n                 <div className=\"h-32 bg-gray-200 rounded-lg animate-pulse\"></div>\r\n               </div>\r\n            ) : analyticsError ? (\r\n              <div className=\"text-red-600 p-4 border border-red-200 rounded-lg bg-red-50\">\r\n                Error loading analytics: {analyticsError instanceof Error ? analyticsError.message : 'Unknown error'}\r\n              </div>\r\n            ) : !analytics || analytics.length === 0 ? (\r\n               <div className=\"text-gray-500 p-4 border rounded-lg bg-gray-50 text-center\">\r\n                 No click data available for the selected {selectedUrl ? 'URL and' : ''} date range.\r\n               </div>\r\n            ) : (\r\n              <div className=\"space-y-6\">\r\n                {/* Total Clicks Card */}\r\n                <div className=\"p-4 bg-white border rounded-lg shadow-sm\">\r\n                  <h3 className=\"text-lg font-medium text-gray-700 mb-1\">Total Clicks</h3>\r\n                  <p className=\"text-3xl font-bold text-blue-600\">{totalClicks}</p>\r\n                  <p className=\"text-xs text-gray-500 mt-1\">\r\n                    Between {new Date(startDate + 'T00:00:00').toLocaleDateString()} and {new Date(endDate + 'T00:00:00').toLocaleDateString()}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Clicks Over Time Chart */}\r\n                <div className=\"p-4 bg-white border rounded-lg shadow-sm\">\r\n                  <h3 className=\"text-lg font-medium text-gray-700 mb-2\">\r\n                     {selectedUrl ? 'Daily Clicks (Selected URL)' : 'Daily Clicks (All URLs)'} \r\n                  </h3>\r\n                  <div className=\"h-64 relative\">\r\n                    <Line data={chartData} options={dynamicChartOptions} />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}